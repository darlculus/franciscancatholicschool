<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Class Management - Franciscan Catholic Nursery & Primary School</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;500;600;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="assets/css/admin-dashboard.css">
    <link rel="stylesheet" href="assets/css/classes.css">
</head>
<body>
    <div class="dashboard-container">
        <!-- Sidebar -->
        <aside class="dashboard-sidebar">
            <div class="sidebar-header">
                <img src="assets/img/logo.jpg" alt="Franciscan Catholic School" class="logo">
                <h3>Admin Portal</h3>
            </div>
            <div class="sidebar-menu">
                <ul>
                    <li>
                        <a href="admin-dashboard.html"><i class="fas fa-tachometer-alt"></i> Dashboard</a>
                    </li>
                    <li>
                        <a href="teachers.html"><i class="fas fa-chalkboard-teacher"></i> Teachers</a>
                    </li>
                    <li>
                        <a href="students.html"><i class="fas fa-user-graduate"></i> Students</a>
                    </li>
                    <li class="active">
                        <a href="classes.html"><i class="fas fa-school"></i> Classes</a>
                    </li>
                    <li>
                        <a href="subjects.html"><i class="fas fa-book"></i> Subjects</a>
                    </li>
                    <li>
                        <a href="attendance.html"><i class="fas fa-calendar-check"></i> Attendance</a>
                    </li>
                    <li>
                        <a href="exams.html"><i class="fas fa-file-alt"></i> Exams</a>
                    </li>
                    <li>
                        <a href="reports.html"><i class="fas fa-chart-bar"></i> Reports</a>
                    </li>
                    <li>
                        <a href="settings.html"><i class="fas fa-cog"></i> Settings</a>
                    </li>
                </ul>
            </div>
            <div class="sidebar-footer">
                <a href="#" id="logout-btn"><i class="fas fa-sign-out-alt"></i> Logout</a>
            </div>
        </aside>

        <!-- Main Content -->
        <main class="dashboard-main">
            <!-- Top Navigation -->
            <nav class="dashboard-nav">
                <button id="sidebar-toggle" class="mobile-toggle">
                    <i class="fas fa-bars"></i>
                </button>
                <div class="nav-right">
                    <div class="date-display">
                        <i class="far fa-calendar-alt"></i>
                        <span id="current-date">Loading...</span>
                    </div>
                    <div class="admin-profile">
                        <img src="assets/images/admin-avatar.png" alt="Admin" class="avatar">
                        <div class="admin-info">
                            <span id="admin-name">Admin User</span>
                            <span id="admin-role">Administrator</span>
                        </div>
                    </div>
                </div>
            </nav>

            <!-- Page Content -->
            <div class="dashboard-content">
                <div class="page-header">
                    <h1>Class Management</h1>
                    <p>Manage all classes, students, and timetables</p>
                </div>

                <!-- Tabs Container -->
                <div class="tabs-container">
                    <div class="tabs-header">
                        <button class="tab-btn active" data-tab="classes">
                            <i class="fas fa-school"></i> Classes
                        </button>
                        <button class="tab-btn" data-tab="students">
                            <i class="fas fa-user-graduate"></i> Students
                        </button>
                        <button class="tab-btn" data-tab="timetable">
                            <i class="fas fa-calendar-alt"></i> Timetable
                        </button>
                        <button class="tab-btn" data-tab="settings">
                            <i class="fas fa-cog"></i> Settings
                        </button>
                    </div>

                    <!-- Classes Tab -->
                    <div id="classes-tab" class="tab-pane active">
                        <div class="action-bar">
                            <div class="search-box">
                                <i class="fas fa-search"></i>
                                <input type="text" id="class-search" placeholder="Search classes...">
                            </div>
                            <div class="filter-box">
                                <select id="level-filter">
                                    <option value="">All Levels</option>
                                    <option value="Nursery">Nursery</option>
                                    <option value="Primary">Primary</option>
                                    <option value="Junior Secondary">Junior Secondary</option>
                                    <option value="Senior Secondary">Senior Secondary</option>
                                </select>
                                <button id="add-class-btn" class="btn-primary">
                                    <i class="fas fa-plus"></i> Add Class
                                </button>
                            </div>
                        </div>

                        <div class="classes-grid">
                            <!-- Class cards will be populated dynamically -->
                        </div>

                        <div id="no-classes-message" class="empty-state" style="display: none;">
                            <i class="fas fa-school"></i>
                            <h3>No Classes Found</h3>
                            <p>There are no classes in the system yet. Click the button below to add your first class.</p>
                            <button id="add-first-class-btn" class="btn-primary">
                                <i class="fas fa-plus"></i> Add First Class
                            </button>
                        </div>
                    </div>

                    <!-- Students Tab -->
                    <div id="students-tab" class="tab-pane">
                        <div class="action-bar">
                            <div class="search-box">
                                <i class="fas fa-search"></i>
                                <input type="text" id="student-search" placeholder="Search students...">
                            </div>
                            <div class="filter-box">
                                <select id="class-filter">
                                    <option value="">All Classes</option>
                                    <!-- Classes will be populated dynamically -->
                                </select>
                                <select id="status-filter">
                                    <option value="">All Status</option>
                                    <option value="active">Active</option>
                                    <option value="inactive">Inactive</option>
                                </select>
                                <button id="add-student-btn" class="btn-primary">
                                    <i class="fas fa-plus"></i> Add Student
                                </button>
                            </div>
                        </div>

                        <div class="students-container">
                            <table class="data-table" id="students-table">
                                <thead>
                                    <tr>
                                        <th>Student ID</th>
                                        <th>Name</th>
                                        <th>Class</th>
                                        <th>Gender</th>
                                        <th>Parent/Guardian</th>
                                        <th>Contact</th>
                                        <th>Status</th>
                                        <th>Actions</th>
                                    </tr>
                                </thead>
                                <tbody>
                                    <!-- Student rows will be populated dynamically -->
                                </tbody>
                            </table>
                        </div>

                        <div id="no-students-message" class="empty-state" style="display: none;">
                            <i class="fas fa-user-graduate"></i>
                            <h3>No Students Found</h3>
                            <p>There are no students in the system yet. Click the button below to add your first student.</p>
                            <button id="add-first-student-btn" class="btn-primary">
                                <i class="fas fa-plus"></i> Add First Student
                            </button>
                        </div>
                    </div>

                    <!-- Timetable Tab -->
                    <div id="timetable-tab" class="tab-pane">
                        <div class="action-bar">
                            <div class="filter-box">
                                <select id="timetable-class-filter">
                                    <option value="">Select Class</option>
                                    <!-- Classes will be populated dynamically -->
                                </select>
                                <button id="edit-timetable-btn" class="btn-primary" disabled>
                                    <i class="fas fa-edit"></i> Edit Timetable
                                </button>
                                <button id="print-timetable-btn" class="btn-secondary" disabled>
                                    <i class="fas fa-print"></i> Print
                                </button>
                            </div>
                        </div>

                        <div class="timetable-container">
                            <table class="timetable" id="class-timetable">
                                <thead>
                                    <tr>
                                        <th>Time</th>
                                        <th>Monday</th>
                                        <th>Tuesday</th>
                                        <th>Wednesday</th>
                                        <th>Thursday</th>
                                        <th>Friday</th>
                                    </tr>
                                </thead>
                                <tbody>
                                    <!-- Timetable rows will be populated dynamically -->
                                </tbody>
                            </table>
                        </div>

                        <div id="no-timetable-message" class="empty-state">
                            <i class="fas fa-calendar-alt"></i>
                            <h3>No Timetable Selected</h3>
                            <p>Please select a class from the dropdown above to view its timetable.</p>
                        </div>
                    </div>

                    <!-- Settings Tab -->
                    <div id="settings-tab" class="tab-pane">
                        <div class="settings-container">
                            <div class="settings-card">
                                <h3>General Settings</h3>
                                <form id="general-settings-form">
                                    <div class="form-group">
                                        <label for="max-students-per-class">Maximum Students Per Class</label>
                                        <input type="number" id="max-students-per-class" min="1" value="30">
                                    </div>
                                    <div class="form-group">
                                        <label for="default-class-start-time">Default Class Start Time</label>
                                        <input type="time" id="default-class-start-time" value="08:00">
                                    </div>
                                    <div class="form-group">
                                        <label for="default-class-end-time">Default Class End Time</label>
                                        <input type="time" id="default-class-end-time" value="14:00">
                                    </div>
                                    <div class="form-group">
                                        <label for="default-period-duration">Default Period Duration (minutes)</label>
                                        <input type="number" id="default-period-duration" min="30" max="120" value="45">
                                    </div>
                                    <div class="form-actions">
                                        <button type="submit" class="btn-primary">Save Settings</button>
                                        <button type="button" id="reset-settings-btn" class="btn-secondary">Reset to Default</button>
                                    </div>
                                </form>
                            </div>

                            <div class="settings-card">
                                <h3>Class Levels</h3>
                                <form id="class-levels-form">
                                    <div class="form-group">
                                        <label for="nursery-levels">Nursery Levels</label>
                                        <input type="number" id="nursery-levels" min="1" max="5" value="2">
                                    </div>
                                    <div class="form-group">
                                        <label for="primary-levels">Primary Levels</label>
                                        <input type="number" id="primary-levels" min="1" max="10" value="6">
                                    </div>
                                    <div class="form-group">
                                        <label for="junior-secondary-levels">Junior Secondary Levels</label>
                                        <input type="number" id="junior-secondary-levels" min="0" max="5" value="0">
                                    </div>
                                    <div class="form-group">
                                        <label for="senior-secondary-levels">Senior Secondary Levels</label>
                                        <input type="number" id="senior-secondary-levels" min="0" max="5" value="0">
                                    </div>
                                    <div class="form-actions">
                                        <button type="submit" class="btn-primary">Save Settings</button>
                                    </div>
                                </form>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </main>
    </div>

    <!-- Add Class Modal -->
    <div id="add-class-modal" class="modal">
        <div class="modal-content">
            <span class="close-modal">&times;</span>
            <h2>Add New Class</h2>
            <form id="add-class-form">
                <div class="form-group">
                    <label for="class-name">Class Name</label>
                    <input type="text" id="class-name" name="class-name" required>
                </div>
                <div class="form-group">
                    <label for="class-level">Class Level</label>
                    <select id="class-level" name="class-level" required>
                        <option value="">Select Level</option>
                        <option value="Nursery">Nursery</option>
                        <option value="Primary">Primary</option>
                        <option value="Junior Secondary">Junior Secondary</option>
                        <option value="Senior Secondary">Senior Secondary</option>
                    </select>
                </div>
                <div class="form-group">
                    <label for="class-capacity">Maximum Capacity</label>
                    <input type="number" id="class-capacity" name="class-capacity" min="1" value="30" required>
                </div>
                <div class="form-group">
                    <label for="class-teacher">Class Teacher</label>
                    <select id="class-teacher" name="class-teacher">
                        <option value="">Select Class Teacher (Optional)</option>
                        <!-- Teachers will be populated dynamically -->
                    </select>
                </div>
                <div class="form-group">
                    <label for="class-color">Class Color</label>
                    <input type="hidden" id="class-color" name="class-color" value="#4CAF50">
                    <div class="color-options">
                        <div class="color-option selected" data-color="#4CAF50" style="background-color: #4CAF50;"></div>
                        <div class="color-option" data-color="#2196F3" style="background-color: #2196F3;"></div>
                        <div class="color-option" data-color="#FF9800" style="background-color: #FF9800;"></div>
                        <div class="color-option" data-color="#F44336" style="background-color: #F44336;"></div>
                        <div class="color-option" data-color="#9C27B0" style="background-color: #9C27B0;"></div>
                        <div class="color-option" data-color="#009688" style="background-color: #009688;"></div>
                        <div class="color-option" data-color="#673AB7" style="background-color: #673AB7;"></div>
                        <div class="color-option" data-color="#3F51B5" style="background-color: #3F51B5;"></div>
                    </div>
                </div>
                <div class="form-group">
                    <label for="class-description">Description</label>
                    <textarea id="class-description" name="class-description" rows="3"></textarea>
                </div>
                <div class="form-actions">
                    <button type="submit" class="btn-primary">Add Class</button>
                    <button type="button" class="btn-secondary cancel-modal">Cancel</button>
                </div>
            </form>
        </div>
    </div>

    <!-- Edit Class Modal -->
    <div id="edit-class-modal" class="modal">
        <div class="modal-content">
            <span class="close-modal">&times;</span>
            <h2>Edit Class</h2>
            <form id="edit-class-form">
                <input type="hidden" id="edit-class-id">
                <div class="form-group">
                    <label for="edit-class-name">Class Name</label>
                    <input type="text" id="edit-class-name" name="edit-class-name" required>
                </div>
                <div class="form-group">
                    <label for="edit-class-level">Class Level</label>
                    <select id="edit-class-level" name="edit-class-level" required>
                        <option value="">Select Level</option>
                        <option value="Nursery">Nursery</option>
                        <option value="Primary">Primary</option>
                        <option value="Junior Secondary">Junior Secondary</option>
                        <option value="Senior Secondary">Senior Secondary</option>
                    </select>
                </div>
                <div class="form-group">
                    <label for="edit-class-capacity">Maximum Capacity</label>
                    <input type="number" id="edit-class-capacity" name="edit-class-capacity" min="1" required>
                </div>
                <div class="form-group">
                    <label for="edit-class-teacher">Class Teacher</label>
                    <select id="edit-class-teacher" name="edit-class-teacher">
                        <option value="">Select Class Teacher (Optional)</option>
                        <!-- Teachers will be populated dynamically -->
                    </select>
                </div>
                <div class="form-group">
                    <label for="edit-class-color">Class Color</label>
                    <input type="hidden" id="edit-class-color" name="edit-class-color">
                    <div class="color-options">
                        <div class="color-option" data-color="#4CAF50" style="background-color: #4CAF50;"></div>
                        <div class="color-option" data-color="#2196F3" style="background-color: #2196F3;"></div>
                        <div class="color-option" data-color="#FF9800" style="background-color: #FF9800;"></div>
                        <div class="color-option" data-color="#F44336" style="background-color: #F44336;"></div>
                        <div class="color-option" data-color="#9C27B0" style="background-color: #9C27B0;"></div>
                        <div class="color-option" data-color="#009688" style="background-color: #009688;"></div>
                        <div class="color-option" data-color="#673AB7" style="background-color: #673AB7;"></div>
                        <div class="color-option" data-color="#3F51B5" style="background-color: #3F51B5;"></div>
                    </div>
                </div>
                <div class="form-group">
                    <label for="edit-class-description">Description</label>
                    <textarea id="edit-class-description" name="edit-class-description" rows="3"></textarea>
                </div>
                <div class="form-actions">
                    <button type="submit" class="btn-primary">Save Changes</button>
                    <button type="button" class="btn-secondary cancel-modal">Cancel</button>
                </div>
            </form>
        </div>
    </div>

    <!-- Add Student Modal -->
    <div id="add-student-modal" class="modal">
        <div class="modal-content">
            <span class="close-modal">&times;</span>
            <h2>Add New Student</h2>
            <form id="add-student-form">
                <div class="form-group">
                    <label for="student-name">Full Name</label>
                    <input type="text" id="student-name" name="student-name" required>
                </div>
                <div class="form-group">
                    <label for="student-gender">Gender</label>
                    <select id="student-gender" name="student-gender" required>
                        <option value="">Select Gender</option>
                        <option value="Male">Male</option>
                        <option value="Female">Female</option>
                    </select>
                </div>
                <div class="form-group">
                    <label for="student-dob">Date of Birth</label>
                    <input type="date" id="student-dob" name="student-dob" required>
                </div>
                <div class="form-group">
                    <label for="student-class">Class</label>
                    <select id="student-class" name="student-class" required>
                        <option value="">Select Class</option>
                        <!-- Classes will be populated dynamically -->
                    </select>
                </div>
                <div class="form-group">
                    <label for="parent-name">Parent/Guardian Name</label>
                    <input type="text" id="parent-name" name="parent-name" required>
                </div>
                <div class="form-group">
                    <label for="parent-phone">Parent/Guardian Phone</label>
                    <input type="tel" id="parent-phone" name="parent-phone" required>
                </div>
                <div class="form-group">
                    <label for="parent-email">Parent/Guardian Email</label>
                    <input type="email" id="parent-email" name="parent-email">
                </div>
                <div class="form-group">
                    <label for="student-address">Address</label>
                    <textarea id="student-address" name="student-address" rows="2"></textarea>
                </div>
                <div class="form-actions">
                    <button type="submit" class="btn-primary">Add Student</button>
                    <button type="button" class="btn-secondary cancel-modal">Cancel</button>
                </div>
            </form>
        </div>
    </div>

    <!-- Edit Student Modal -->
    <div id="edit-student-modal" class="modal">
        <div class="modal-content">
            <span class="close-modal">&times;</span>
            <h2>Edit Student</h2>
            <form id="edit-student-form">
                <input type="hidden" id="edit-student-id">
                <div class="form-group">
                    <label for="edit-student-name">Full Name</label>
                    <input type="text" id="edit-student-name" name="edit-student-name" required>
                </div>
                <div class="form-group">
                    <label for="edit-student-gender">Gender</label>
                    <select id="edit-student-gender" name="edit-student-gender" required>
                        <option value="">Select Gender</option>
                        <option value="Male">Male</option>
                        <option value="Female">Female</option>
                    </select>
                </div>
                <div class="form-group">
                    <label for="edit-student-dob">Date of Birth</label>
                    <input type="date" id="edit-student-dob" name="edit-student-dob" required>
                </div>
                <div class="form-group">
                    <label for="edit-student-class">Class</label>
                    <select id="edit-student-class" name="edit-student-class" required>
                        <option value="">Select Class</option>
                        <!-- Classes will be populated dynamically -->
                    </select>
                </div>
                <div class="form-group">
                    <label for="edit-parent-name">Parent/Guardian Name</label>
                    <input type="text" id="edit-parent-name" name="edit-parent-name" required>
                </div>
                <div class="form-group">
                    <label for="edit-parent-phone">Parent/Guardian Phone</label>
                    <input type="tel" id="edit-parent-phone" name="edit-parent-phone" required>
                </div>
                <div class="form-group">
                    <label for="edit-parent-email">Parent/Guardian Email</label>
                    <input type="email" id="edit-parent-email" name="edit-parent-email">
                </div>
                <div class="form-group">
                    <label for="edit-student-address">Address</label>
                    <textarea id="edit-student-address" name="edit-student-address" rows="2"></textarea>
                </div>
                <div class="form-group">
                    <label for="edit-student-status">Status</label>
                    <select id="edit-student-status" name="edit-student-status" required>
                        <option value="active">Active</option>
                        <option value="inactive">Inactive</option>
                    </select>
                </div>
                <div class="form-actions">
                    <button type="submit" class="btn-primary">Save Changes</button>
                    <button type="button" class="btn-secondary cancel-modal">Cancel</button>
                </div>
            </form>
        </div>
    </div>

    <!-- Edit Timetable Modal -->
    <div id="edit-timetable-modal" class="modal">
        <div class="modal-content">
            <span class="close-modal">&times;</span>
            <h2>Edit Class Timetable</h2>
            <form id="edit-timetable-form">
                <input type="hidden" id="timetable-class-id">
                <div class="form-group">
                    <label for="timetable-class-name">Class</label>
                    <input type="text" id="timetable-class-name" readonly>
                </div>
                <div class="form-group">
                    <label>Timetable Settings</label>
                    <div class="timetable-settings">
                        <div class="form-group">
                            <label for="timetable-start-time">Start Time</label>
                            <input type="time" id="timetable-start-time" required>
                        </div>
                        <div class="form-group">
                            <label for="timetable-end-time">End Time</label>
                            <input type="time" id="timetable-end-time" required>
                        </div>
                        <div class="form-group">
                            <label for="timetable-period-duration">Period Duration (minutes)</label>
                            <input type="number" id="timetable-period-duration" min="30" max="120" required>
                        </div>
                        <div class="form-group">
                            <label for="timetable-break-time">Break Time</label>
                            <input type="time" id="timetable-break-time" required>
                        </div>
                        <div class="form-group">
                            <label for="timetable-break-duration">Break Duration (minutes)</label>
                            <input type="number" id="timetable-break-duration" min="10" max="60" required>
                        </div>
                    </div>
                </div>
                <div class="form-group">
                    <label>Timetable Slots</label>
                    <div id="timetable-slots-container">
                        <!-- Timetable slots will be generated dynamically -->
                    </div>
                </div>
                <div class="form-actions">
                    <button type="submit" class="btn-primary">Save Timetable</button>
                    <button type="button" class="btn-secondary cancel-modal">Cancel</button>
                </div>
            </form>
        </div>
    </div>

    <!-- Delete Confirmation Modal -->
    <div id="delete-confirmation-modal" class="modal">
        <div class="modal-content">
            <span class="close-modal">&times;</span>
            <h2>Confirm Deletion</h2>
            <p id="delete-confirmation-message">Are you sure you want to delete this item? This action cannot be undone.</p>
            <div class="form-actions">
                <button id="confirm-delete-btn" class="btn-primary">Delete</button>
                <button class="btn-secondary cancel-modal">Cancel</button>
            </div>
        </div>
    </div>

    <script src="assets/js/classes.js"></script>
</body>
</html>